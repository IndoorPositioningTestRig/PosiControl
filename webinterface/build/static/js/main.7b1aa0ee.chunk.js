(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,a){e.exports=a(253)},113:function(e,t,a){},115:function(e,t,a){},117:function(e,t,a){},119:function(e,t,a){},123:function(e,t,a){},244:function(e,t,a){},246:function(e,t,a){},248:function(e,t,a){},250:function(e,t,a){},253:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(77),r=a.n(i),s=(a(113),a(8)),l=a(9),o=a(12),u=a(10),d=a(11),m=(a(115),a(4)),h=(a(117),a(49)),v=a.n(h),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={open:!1},a.handleSelected=a.handleSelected.bind(Object(m.a)(Object(m.a)(a))),a.open=a.open.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"open",value:function(){this.setState({open:!0})}},{key:"handleSelected",value:function(e){this.props.onSelected(e),this.setState({open:!1})}},{key:"handleClickOutside",value:function(){this.setState({open:!1})}},{key:"renderClosed",value:function(){var e=this.props.value;return c.a.createElement("div",{className:"wrapper closed",onClick:this.open},null===e?"none":e)}},{key:"renderOpen",value:function(){var e=this,t=this.props.options;return c.a.createElement("div",{className:"wrapper open"},c.a.createElement("div",{className:"option",key:"none",onClick:function(){return e.handleSelected(null)}},"none"),t.map(function(t){return c.a.createElement("div",{className:"option",key:t,onClick:function(){return e.handleSelected(t)}},t)}))}},{key:"render",value:function(){return c.a.createElement("div",{className:"dropdown"},this.state.open?this.renderOpen():this.renderClosed())}}]),t}(c.a.Component),f=v()(p),b=(a(119),{request:1,command:2,response:3});function g(){return"http://".concat(window.location.hostname,":8000")}var E=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={message:{target:null,messageType:null,data:""}},a.handleConfirmClick=a.handleConfirmClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleValue",value:function(e,t){var a=this.state.message;a[e]=t,this.setState({message:a})}},{key:"handleConfirmClick",value:function(){var e=this.state.message;if(null!==e.target)if(null!==e.messageType){var t=b[e.messageType];fetch("".concat(g(),"/msg/").concat(e.target,"/").concat(t,"/"),{method:"post",body:e.data,mode:"no-cors"})}else alert("Type missing");else alert("Target missing!")}},{key:"render",value:function(){var e=this,t=this.state.message;return c.a.createElement("div",{className:"screen-message"},c.a.createElement("div",{className:"header"},"Send a message"),c.a.createElement("div",{className:"body"},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"target:"),c.a.createElement("div",{className:"value"},c.a.createElement(f,{onSelected:function(t){return e.handleValue("target",t)},value:t.target,options:[0,1,2,3,4,5,6,7,8]}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"type:"),c.a.createElement("div",{className:"value"},c.a.createElement(f,{onSelected:function(t){return e.handleValue("messageType",t)},value:t.messageType,options:["command","request","response"]}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"data:"),c.a.createElement("div",{className:"value"},c.a.createElement("div",{className:"text-wrapper"},c.a.createElement("textarea",{rows:"4",onChange:function(t){return e.handleValue("data",t.target.value)},value:t.data})))),c.a.createElement("div",{onClick:this.handleConfirmClick,className:"confirm-button"},"Send")))}}]),t}(c.a.Component),O=a(31),C=a.n(O),k=a(44),j=a(50),N=(a(123),a(106));a(244);var y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={width:window.innerWidth},a.handleResize=a.handleResize.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleResize",value:function(){this.setState({width:window.innerWidth})}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.handleResize)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize)}},{key:"render",value:function(){var e=function(e){var t=[],a=[],n=[];return e.forEach(function(e){t.push({x:e.time,y:e.setpoint/10}),a.push({x:e.time,y:e.output/10}),n.push({x:e.time,y:e.encoder/10})}),[t,a,n]}(this.props.data||[]);console.log("graphdata",e);var t=600;return this.state.width<900&&(t=this.state.width-20),c.a.createElement("div",{className:"data-plotter"},c.a.createElement("div",null,c.a.createElement("div",{className:"legend-item"},c.a.createElement("div",{style:{backgroundColor:"red"},className:"legend-icon"}),"setpoint"),c.a.createElement("div",{className:"legend-item"},c.a.createElement("div",{style:{backgroundColor:"blue"},className:"legend-icon"}),"output"),c.a.createElement("div",{className:"legend-item"},c.a.createElement("div",{style:{backgroundColor:"green"},className:"legend-icon"}),"encoder")),c.a.createElement(N.LineChart,{axes:!0,margin:{top:10,right:10,bottom:50,left:50},grid:!0,lineColors:["red","blue","green"],verticalGrid:!0,width:t,height:400,data:e}))}}]),t}(c.a.Component),w=(a(246),["p","i","d"]),S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={p:0,i:0,d:0,errors:{}},a.handleChange=a.handleChange.bind(Object(m.a)(Object(m.a)(a))),a.handleConfirmClick=a.handleConfirmClick.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleChange",value:function(e,t){this.setState(Object(j.a)({},e,t))}},{key:"handleConfirmClick",value:function(){if(null!==this.props.target){var e=this.state,t=this.state.errors,a=!1;return w.forEach(function(n){var c=Number.parseFloat(e[n]);t[n]=Number.isNaN(c),a=a||t[n],e[n]=c}),a?(this.setState({errors:t}),void alert("Only floating point values are allowed for PID")):fetch("".concat(g(),"/set_pid/").concat(this.props.target,"/").concat(e.p,"/").concat(e.i,"/").concat(e.d,"/"),{method:"post"})}alert("No target selected!")}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"pid-screen"},c.a.createElement("b",null,"PID"),c.a.createElement("div",{className:"pid-input"},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"P"),c.a.createElement("input",{type:"number",value:this.state.p,onChange:function(t){return e.handleChange("p",t.target.value)}})),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"I"),c.a.createElement("input",{type:"number",value:this.state.i,onChange:function(t){return e.handleChange("i",t.target.value)}})),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"D"),c.a.createElement("input",{type:"number",value:this.state.d,onChange:function(t){return e.handleChange("d",t.target.value)}}))),c.a.createElement("div",{onClick:this.handleConfirmClick,className:"confirm-button"},"Apply"))}}]),t}(c.a.Component),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={data:[],target:null,setPoint:"0",setPointWarning:!1,useEncoder:!1},a.handleSetPointChange=a.handleSetPointChange.bind(Object(m.a)(Object(m.a)(a))),a.handleConfirmClick=a.handleConfirmClick.bind(Object(m.a)(Object(m.a)(a))),a.handleEncoderChange=a.handleEncoderChange.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleValue",value:function(e,t){this.setState(Object(j.a)({},e,t))}},{key:"handleConfirmClick",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,c,i,r,s,l,o;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.target,n=t.setPoint,c=t.setPointWarning,i=t.useEncoder,null!==a&&!c){e.next=4;break}return alert("Target and/or setPoint is invalid!"),e.abrupt("return");case 4:return r=i?1:0,e.next=7,fetch("".concat(g(),"/setPoint/").concat(a,"/").concat(Number.parseInt(n),"/").concat(r,"/"),{method:"get"});case 7:return s=e.sent,e.next=10,s.text();case 10:l=e.sent,console.log("gotjson",l),o=JSON.parse(l),console.log("gotdata",o),this.setState({data:o});case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleSetPointChange",value:function(e){var t=e.target.value,a=Number.parseInt(t),n=isNaN(a);this.setState({setPoint:t,setPointWarning:n})}},{key:"fetchPid",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g(),"/pid/").concat(this.state.target),{method:"get"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleEncoderChange",value:function(e){this.setState({useEncoder:!this.state.useEncoder})}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.target,i=t.setPoint,r=t.setPointWarning;return c.a.createElement("div",{className:"setpoint-screen"},c.a.createElement("div",{className:"left"},c.a.createElement("div",{className:"fields"},c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"Encoder:"),c.a.createElement("div",{className:"value"},c.a.createElement("input",{type:"checkbox",onChange:this.handleEncoderChange,value:this.state.useEncoder}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"target:"),c.a.createElement("div",{className:"value"},c.a.createElement(f,{onSelected:function(t){return e.handleValue("target",t)},value:n,options:[0,1,2,3,4,5,6,7,8]}))),c.a.createElement("div",{className:"field"},c.a.createElement("div",{className:"name"},"setPoint:"),c.a.createElement("div",{className:"value"},c.a.createElement("input",{className:"setpoint-input ".concat(r&&"warning"),type:"number",value:i,onChange:this.handleSetPointChange})))),c.a.createElement("div",{onClick:this.handleConfirmClick,className:"confirm-button"},"Send")),c.a.createElement("div",{className:"right"},c.a.createElement(y,{data:a})),c.a.createElement("div",null,c.a.createElement(S,{target:this.state.target})))}}]),t}(c.a.Component),P=(a(248),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={responses:[],homing:!1},a.handleHomeClicked=a.handleHomeClicked.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleHomeClicked",value:function(){var e=Object(k.a)(C.a.mark(function e(){var t,a,n,c;return C.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state.homing,a=this.state.responses.slice(),!t){e.next=4;break}return e.abrupt("return");case 4:return this.setState({homing:!0}),e.next=7,fetch("".concat(g(),"/home/"),{method:"get"});case 7:return n=e.sent,e.next=10,n.text();case 10:c=e.sent,a.push(c),this.setState({homing:!1,responses:a});case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderResponses",value:function(){var e=this.state.responses;return 0===e.length?null:c.a.createElement("div",null,e.map(function(e,t){return c.a.createElement("div",{className:"result-row"},c.a.createElement("div",{className:"index"},t,":"),c.a.createElement("div",null,e))}))}},{key:"render",value:function(){var e=this.state.homing;return c.a.createElement("div",{className:"home"},c.a.createElement("button",{disabled:e,onClick:this.handleHomeClicked},"HOME!"),e&&c.a.createElement("div",null,"Homing in progress, please wait..."),this.renderResponses())}}]),t}(c.a.Component)),T=a(257),W=a(254),z=(a(250),a(256)),H=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).state={menuOpen:!1,navTarget:null},a.handleClose=a.handleClose.bind(Object(m.a)(Object(m.a)(a))),a.handleButtonClick=a.handleButtonClick.bind(Object(m.a)(Object(m.a)(a))),a.handleNavClicked=a.handleNavClicked.bind(Object(m.a)(Object(m.a)(a))),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleButtonClick",value:function(){this.setState({menuOpen:!this.state.menuOpen})}},{key:"handleClose",value:function(){this.setState({menuOpen:!1})}},{key:"handleNavClicked",value:function(e){this.props.history.push(e),this.setState({menuOpen:!1})}},{key:"render",value:function(){return c.a.createElement("div",{className:"top-bar"},c.a.createElement("div",{onClick:this.handleButtonClick,className:"menu-button"},c.a.createElement("div",{className:"icon"},c.a.createElement("div",{className:"line"}),c.a.createElement("div",{className:"line"}),c.a.createElement("div",{className:"line"}))),this.state.menuOpen&&c.a.createElement(I,{onOptionClick:this.handleNavClicked,onClickOutside:this.handleClose}))}}]),t}(c.a.Component),R=Object(z.a)(H),B=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"handleClickOutside",value:function(){this.props.onClickOutside()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"menu"},c.a.createElement("div",{className:"option",onClick:function(){return e.props.onOptionClick("/")}},"Setpoint"),c.a.createElement("div",{className:"option",onClick:function(){return e.props.onOptionClick("message")}},"Message"),c.a.createElement("div",{className:"option",onClick:function(){return e.props.onOptionClick("home")}},"Home"))}}]),t}(c.a.Component),I=v()(B),V=function(e){function t(){return Object(s.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"App"},c.a.createElement(R,null),c.a.createElement(T.a,null,c.a.createElement(W.a,{path:"/message",component:E}),c.a.createElement(W.a,{path:"/home",component:P}),c.a.createElement(W.a,{path:"/",component:x})))}}]),t}(c.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var D=a(255);r.a.render(c.a.createElement(D.a,null,c.a.createElement(V,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[108,2,1]]]);
//# sourceMappingURL=main.7b1aa0ee.chunk.js.map